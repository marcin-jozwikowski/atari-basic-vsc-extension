{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Atari BASIC",
  "scopeName": "source.basic",
  "information_for_contributors": [
    "This file is a modified version of https://github.com/thinkyhead/6502-Tools/blob/master/Sublime/AtariTools/AtariBASIC.sublime-syntax"
  ],
  "first_line_match": "\\d+ (\\?|BYE|C(OLOR|L(OSE|OAD|R)|OM|ONT|SAVE)|D(ATA|IM|OS|RAWTO)|EN(TER|D)|FOR|G(ET|O(SUB|TO)|RAPHICS)|IF|INPUT|L(ET|IST|OAD|OCATE|PRINT)|NE(W|XT)|NOTE|ON|OPEN|P(LOT|O(INT|KE|P|SITION)|RINT|UT)|RE(AD|M|STORE|TURN)|RUN|S(AVE|ETCOLOR|OUND|TATUS|TOP)|TRAP)([ :]|$)",
  "patterns": [
    {
      "include": "#prototype"
    },
    {
      "include": "#main"
    },
    {
      "include": "#code_line"
    },
    {
      "include": "#cmd_xio"
    },
    {
      "include": "#cmd_xio_part2"
    },
    {
      "include": "#cmd_on"
    },
    {
      "include": "#cmd_on_expr"
    },
    {
      "include": "#on_line_list"
    },
    {
      "include": "#cmd_rem"
    },
    {
      "include": "#cmd_data"
    },
    {
      "include": "#cmd_done"
    },
    {
      "include": "#cmd_let"
    },
    {
      "include": "#cmd_let_equals"
    },
    {
      "include": "#cmd_if"
    },
    {
      "include": "#cmd_for"
    },
    {
      "include": "#cmd_next"
    },
    {
      "include": "#cmd_dim_list"
    },
    {
      "include": "#cmd_dim_subscript"
    },
    {
      "include": "#mixin_variable_name"
    },
    {
      "include": "#var_eat_subscript"
    },
    {
      "include": "#mixin_values"
    },
    {
      "include": "#required_args"
    },
    {
      "include": "#mixin_operators"
    },
    {
      "include": "#expr_device"
    },
    {
      "include": "#mixin_top_expr"
    },
    {
      "include": "#expr_start"
    },
    {
      "include": "#expr_start_last"
    },
    {
      "include": "#expr_paren_open"
    },
    {
      "include": "#cmd_print_dev"
    },
    {
      "include": "#mixin_string"
    },
    {
      "include": "#cmd_print_old"
    },
    {
      "include": "#cmd_print"
    },
    {
      "include": "#quoted_string"
    },
    {
      "include": "#syntax_error"
    },
    {
      "include": "#line_should_end"
    },
    {
      "include": "#statement_should_end"
    },
    {
      "include": "#line_and_statement_should_end"
    },
    {
      "include": "#dead_code"
    },
    {
      "include": "#marked_dead"
    },
    {
      "include": "#real_expr"
    },
    {
      "include": "#expr_eat_modifier"
    },
    {
      "include": "#expr_2nd_modifier"
    },
    {
      "include": "#expr_wants_value"
    },
    {
      "include": "#expr_wants_operator"
    },
    {
      "include": "#expr_wants_comparison"
    },
    {
      "include": "#expr_eat_subscript"
    },
    {
      "include": "#expr_eat_string"
    },
    {
      "include": "#expr_till_close"
    },
    {
      "include": "#expr_wants_float"
    },
    {
      "include": "#expr_wants_string"
    },
    {
      "include": "#mixin_containers"
    },
    {
      "include": "#mixin_some_exprs"
    },
    {
      "include": "#one_expr"
    },
    {
      "include": "#two_exprs"
    },
    {
      "include": "#three_exprs"
    },
    {
      "include": "#four_exprs"
    },
    {
      "include": "#mixin_statement_end"
    }
  ],
  "repository": {
    "prototype": {
      "patterns": [
        {
          "match": "\\s+"
        },
        {
          "match": "$"
        }
      ]
    },
    "main": {
      "patterns": [
        {
          "meta_include_prototype": false
        },
        {
          "meta_content_scope": "ctx.main.ataribasic"
        },
        {
          "match": "$"
        },
        {
          "match": "^(.{254})(\\S.+?)\\s*$",
          "captures": {
            "1": {
              "name": "invalid.warning.line-too-long.ataribasic"
            },
            "2": {
              "name": "invalid.error.line-too-long.ataribasic"
            }
          }
        },
        {
          "match": "\\s+"
        },
        {
          "match": "([-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?))\\s*ERROR\\s*-.*",
          "name": "invalid.error.line.ataribasic",
          "push": "syntax_error"
        },
        {
          "match": "^(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?)",
          "name": "constant.numeric.line-number.ataribasic",
          "push": "code_line"
        },
        {
          "match": "",
          "push": "code_line"
        },
        {
          "match": "\"(.*)\"",
          "name": "string.quoted.double"
        }
      ]
    },
    "code_line": {
      "patterns": [
        {
          "meta_content_scope": "ctx.code_line.ataribasic"
        },
        {
          "match": "((REM|(RE?)?\\.)([\\s\\S]*))",
          "name": "keyword.rem.ataribasic",
          "captures": {
            "2": {
              "name": "comment.line"
            },
            "4": {
              "name": "comment.line"
            }
          }
        },
        {
          "match": "(D(ATA|(AT?)?\\.))\\s*",
          "captures": {
            "1": {
              "name": "keyword.data.ataribasic"
            }
          },
          "push": "cmd_data"
        },
        {
          "match": "RES(TORE|(T(O(RE?)?)?)?\\.)",
          "name": "keyword.restore.ataribasic",
          "push": "expr_start"
        },
        {
          "match": "(CLR)|(CON[T.])|(DEG)|(POP)|(RAD)|(CLOAD)|(CS(AVE|(AV?)?\\.))",
          "captures": {
            "1": {
              "name": "keyword.clr.ataribasic"
            },
            "2": {
              "name": "keyword.cont.ataribasic"
            },
            "3": {
              "name": "keyword.deg.ataribasic"
            },
            "4": {
              "name": "keyword.pop.ataribasic"
            },
            "5": {
              "name": "keyword.rad.ataribasic"
            },
            "6": {
              "name": "keyword.cload.ataribasic"
            },
            "7": {
              "name": "keyword.csave.ataribasic"
            }
          },
          "push": "cmd_done"
        },
        {
          "match": "(B(YE|Y?\\.))|(DOS)|(END)|(NEW)|(STO[P.])|(RET(URN|(UR?)?\\.))",
          "captures": {
            "1": {
              "name": "keyword.bye.ataribasic"
            },
            "3": {
              "name": "keyword.dos.ataribasic"
            },
            "4": {
              "name": "keyword.end.ataribasic"
            },
            "5": {
              "name": "keyword.new.ataribasic"
            },
            "6": {
              "name": "keyword.stop.ataribasic"
            },
            "7": {
              "name": "keyword.return.ataribasic"
            }
          },
          "push": "line_and_statement_should_end"
        },
        {
          "match": "RU[N.]",
          "name": "keyword.run.ataribasic",
          "push": "expr_start_last"
        },
        {
          "match": "(\\?|PR(INT|(IN?)?.))\\s*(#)",
          "captures": {
            "1": {
              "name": "keyword.print.ataribasic"
            },
            "4": {
              "name": "support.token.iocb.ataribasic"
            }
          },
          "push": "cmd_print_dev"
        },
        {
          "match": "\\?|PR(INT|(IN?)?\\.)",
          "name": "keyword.print.ataribasic",
          "push": "cmd_print"
        },
        {
          "match": "LP(RINT|(R(IN?)?)?\\.)",
          "name": "keyword.lprint.ataribasic",
          "push": "cmd_print"
        },
        {
          "match": "(I(NPUT|(N(PU?)?)?\\.))\\s*(#)",
          "captures": {
            "1": {
              "name": "keyword.input.ataribasic"
            },
            "5": {
              "name": "support.token.iocb.ataribasic"
            }
          },
          "push": "expr_device"
        },
        {
          "match": "I(NPUT|(N(PU?)?)?\\.)",
          "name": "keyword.input.ataribasic",
          "push": "expr_start"
        },
        {
          "match": "(CL(OSE|(OS?)?\\.))\\s*(#)",
          "captures": {
            "1": {
              "name": "keyword.close.ataribasic"
            },
            "4": {
              "name": "support.token.iocb.ataribasic"
            }
          },
          "push": "expr_device"
        },
        {
          "match": "(O(PEN|(PE?)?\\.))\\s*(#)",
          "captures": {
            "1": {
              "name": "keyword.open.ataribasic"
            },
            "4": {
              "name": "support.token.iocb.ataribasic"
            }
          },
          "push": "expr_device"
        },
        {
          "match": "((GET)|(NO(TE|T?\\.))|(ST(ATUS|(A(TU?)?)?\\.)))\\s*(#)",
          "captures": {
            "2": {
              "name": "keyword.get.ataribasic"
            },
            "3": {
              "name": "keyword.note.ataribasic"
            },
            "5": {
              "name": "keyword.status.ataribasic"
            },
            "9": {
              "name": "support.token.iocb.ataribasic"
            }
          },
          "push": "expr_device"
        },
        {
          "match": "XIO\\b",
          "name": "keyword.xio.ataribasic",
          "push": "cmd_xio"
        },
        {
          "match": "(PUT)\\s*(#)",
          "captures": {
            "1": {
              "name": "keyword.get.ataribasic"
            },
            "2": {
              "name": "support.token.iocb.ataribasic"
            }
          },
          "push": "expr_device"
        },
        {
          "match": "(P(OINT|(O(IN?)?)?\\.))\\s*(#)",
          "captures": {
            "1": {
              "name": "keyword.get.ataribasic"
            },
            "5": {
              "name": "support.token.iocb.ataribasic"
            }
          },
          "push": "expr_device"
        },
        {
          "match": "DIM|COM",
          "name": "keyword.dim.ataribasic",
          "push": "cmd_dim_list"
        },
        {
          "match": "F(OR|O?\\.)",
          "name": "keyword.for.ataribasic",
          "push": "cmd_for"
        },
        {
          "match": "N(EXT|(EX?)?\\.)",
          "name": "keyword.next.ataribasic",
          "push": "cmd_next"
        },
        {
          "match": "T(RAP|(RA?)?\\.)",
          "name": "keyword.trap.ataribasic",
          "push": "one_expr"
        },
        {
          "match": "POK[E.]",
          "name": "keyword.poke.ataribasic",
          "push": "two_exprs"
        },
        {
          "match": "C(OLOR|(O(LO?)?)?\\.)",
          "name": "keyword.color.ataribasic",
          "push": "one_expr"
        },
        {
          "match": "DR(AWTO|(A(WT?)?)?\\.)",
          "name": "keyword.drawto.ataribasic",
          "push": "two_exprs"
        },
        {
          "match": "GR(APHICS|(A(P(H(IC?)?)?)?)?\\.)",
          "name": "keyword.graphics.ataribasic",
          "push": "one_expr"
        },
        {
          "match": "LOC(ATE|(AT?)?\\.)",
          "name": "keyword.locate.ataribasic",
          "push": "three_exprs"
        },
        {
          "match": "POS(ITION|(I(T(IO?)?)?)?\\.)",
          "name": "keyword.position.ataribasic",
          "push": "two_exprs"
        },
        {
          "match": "PL(OT|O?\\.)",
          "name": "keyword.plot.ataribasic",
          "push": "two_exprs"
        },
        {
          "match": "SE(TCOLOR|(T(C(O(LO?)?)?)?)?\\.)",
          "name": "keyword.setcolor.ataribasic",
          "push": "three_exprs"
        },
        {
          "match": "SO(UND|(UN?)?\\.)",
          "name": "keyword.sound.ataribasic",
          "push": "four_exprs"
        },
        {
          "match": "REA[D.]",
          "name": "keyword.read.ataribasic",
          "push": "expr_start"
        },
        {
          "match": "THREE",
          "name": "keyword.three.ataribasic",
          "push": "three_exprs"
        },
        {
          "match": "L(IST|(IS?)?\\.)",
          "name": "keyword.list.ataribasic",
          "push": "expr_start"
        },
        {
          "match": "(LO(AD|A?\\.))|(S(AVE|(AV?)?\\.))|(E(NTER|(N(TE?)?)?\\.))",
          "captures": {
            "1": {
              "name": "keyword.load.ataribasic"
            },
            "3": {
              "name": "keyword.save.ataribasic"
            },
            "6": {
              "name": "keyword.enter.ataribasic"
            }
          },
          "push": "one_expr"
        },
        {
          "match": "G(OTO|(OT?)?\\.)",
          "name": "keyword.goto.ataribasic",
          "push": "expr_start_last"
        },
        {
          "match": "GOS(UB|U?\\.)",
          "name": "keyword.gosub.ataribasic",
          "push": "one_expr"
        },
        {
          "match": "ON",
          "name": "keyword.on.ataribasic",
          "push": "cmd_on"
        },
        {
          "match": "IF",
          "name": "keyword.if.ataribasic",
          "push": "cmd_if"
        },
        {
          "match": "THEN",
          "name": "keyword.then.ataribasic",
          "push": "cmd_then"
        },
        {
          "match": "(LET)\\s*([A-Z][A-Z0-9]*\\$)",
          "captures": {
            "1": {
              "name": "keyword.let.ataribasic"
            },
            "2": {
              "name": "variable.string.let.ataribasic"
            }
          },
          "push": "cmd_let"
        },
        {
          "match": "(VAR)\\s*([A-Z][A-Z0-9]*)",
          "captures": {
            "1": {
              "name": "keyword.var.ataribasic"
            },
            "2": {
              "name": "variable.string.var.ataribasic"
            }
          },
          "push": "cmd_var"
        }
      ]
    },
    "cmd_xio": {
      "patterns": [
        {
          "match": "\\,",
          "name": "support.token.delimiter.list.1.ataribasic",
          "set": "cmd_xio_part2"
        },
        {
          "include": "#real_expr"
        }
      ]
    },
    "cmd_xio_part2": {
      "patterns": [
        {
          "match": "\\s*(\\#[0-9{1,2}])",
          "captures": {
            "1": {
              "name": "support.token.iocb.ataribasic"
            }
          },
          "set": "expr_device"
        }
      ]
    },
    "cmd_on": {
      "patterns": [
        {
          "meta_scope": "ctx.cmd_on.ataribasic"
        },
        {
          "match": "\\s*(:|$|(GOTO|GOSUB)\\b)",
          "name": "invalid.illegal"
        }
      ]
    },
    "cmd_on_expr": {
      "patterns": [
        {
          "match": "GOTO",
          "name": "keyword.on-goto.ataribasic",
          "set": "on_line_list"
        },
        {
          "match": "GOSUB",
          "name": "keyword.on-gosub.ataribasic",
          "set": "on_line_list"
        },
        {
          "include": "#mixin_some_exprs"
        }
      ]
    },
    "on_line_list": {
      "patterns": [
        {
          "include": "#mixin_statement_end"
        },
        {
          "match": "(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?|[A-Z][A-Z0-9]*)\\s*(\\,)?",
          "captures": {
            "1": {
              "name": "constant.numeric.line-number.ataribasic"
            },
            "2": {
              "name": "support.token.delimiter.list.ataribasic"
            }
          }
        },
        {
          "match": "[^\\d]",
          "name": "invalid.illegal"
        }
      ]
    },
    "cmd_rem": {
      "patterns": [
        {
          "match": "(REM)([\\w ]*)",
          "captures": {
            "1": {
              "name": "comment.ataribasic"
            },
            "2": {
              "name": "comment.ataribasic"
            }
          }
        }
      ]
    },
    "cmd_data": {
      "patterns": [
        {
          "match": "$"
        },
        {
          "match": "([^,]+?)(\\s*$)?",
          "name": "entity.literal.string.data.ataribasic"
        },
        {
          "match": "\\,",
          "name": "support.token.delimiter.data.ataribasic"
        }
      ]
    },
    "cmd_done": {
      "patterns": [
        {
          "include": "#mixin_statement_end"
        }
      ]
    },
    "cmd_let": {
      "patterns": [
        {
          "meta_scope": "ctx.cmd_let.ataribasic"
        },
        {
          "match": "\\(",
          "name": "support.paren.open.subscript.ataribasic",
          "push": "expr_paren_open"
        }
      ]
    },
    "cmd_let_equals": {
      "patterns": [
        {
          "meta_content_scope": "ctx.cmd_let_equals.ataribasic"
        },
        {
          "match": "=",
          "name": "keyword.operator.assignment.ataribasic",
          "set": "one_expr"
        }
      ]
    },
    "cmd_if": {
      "patterns": [
        {
          "meta_content_scope": "ctx.cmd_if.ataribasic"
        },
        {
          "match": "\\s*:|$",
          "name": "invalid.illegal"
        },
        {
          "include": "#real_expr"
        },
        {
          "match": "\\s*([-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?))",
          "captures": {
            "1": {
              "name": "constant.numeric.line-number.ataribasic"
            }
          },
          "set": "line_and_statement_should_end"
        },
        {
          "match": ".",
          "name": "support.test.ataribasic"
        }
      ]
    },
    "cmd_for": {
      "patterns": [
        {
          "include": "#mixin_statement_end"
        },
        {
          "match": "TO",
          "name": "keyword.to.ataribasic"
        },
        {
          "match": "STEP",
          "name": "keyword.step.ataribasic"
        },
        {
          "include": "#expr_start"
        }
      ]
    },
    "cmd_next": {
      "patterns": [
        {
          "match": "[A-Z][A-Z0-9]*",
          "name": "variable.float.cmdnext.ataribasic",
          "set": "cmd_done"
        },
        {
          "match": ""
        }
      ]
    },
    "cmd_dim_list": {
      "patterns": [
        {
          "meta_content_scope": "ctx.cmd_dim_list.ataribasic"
        },
        {
          "include": "#mixin_statement_end"
        },
        {
          "match": "\\,",
          "name": "punctuation.definition.delimiter.list.ataribasic"
        },
        {
          "match": "[A-Z][A-Z0-9]*\\$",
          "name": "variable.string.dim.ataribasic",
          "push": "cmd_dim_subscript"
        },
        {
          "match": "[A-Z][A-Z0-9]*",
          "name": "variable.float.cmddimlist.ataribasic",
          "push": "cmd_dim_subscript"
        }
      ]
    },
    "cmd_dim_subscript": {
      "patterns": [
        {
          "match": "\\(",
          "name": "support.paren.open.dim.ataribasic",
          "push": "expr_paren_open"
        },
        {
          "match": ""
        }
      ]
    },
    "mixin_variable_name": {
      "patterns": [
        {
          "match": "[A-Z][A-Z0-9]*\\$",
          "name": "variable.string.varname.ataribasic",
          "push": "var_eat_subscript"
        },
        {
          "match": "[A-Z][A-Z0-9]*",
          "name": "variable.float.mixinvarname.ataribasic",
          "push": "var_eat_subscript"
        }
      ]
    },
    "var_eat_subscript": {
      "patterns": [
        {
          "meta_scope": "ctx.var_eat_subscript.ataribasic"
        },
        {
          "match": "\\(",
          "name": "support.paren.open.subscript.ataribasic",
          "push": "expr_paren_open"
        },
        {
          "match": ""
        }
      ]
    },
    "mixin_values": {
      "patterns": [
        {
          "match": "[a-z\\$\\%]",
          "name": "invalid.illegal"
        },
        {
          "match": "CHR\\$",
          "name": "meta.function-call.chrS.ataribasic",
          "push": "required_args"
        },
        {
          "match": "STR\\$",
          "name": "meta.function-call.str.ataribasic",
          "push": "required_args"
        },
        {
          "match": "(FRE)|(USR)|(ABS)|(ADR)|(ASC)|(ATN)|(CLOG)|(COS)|(EXP)|(INT)|(LEN)|(LOG)|(PEEK)|(RND)|(SGN)|(SIN)|(SQR)|(VAL)|(PADDLE)|(PTRIG)|(STICK)|(STRIG)",
          "captures": {
            "1": {
              "name": "meta.function-call.fre.ataribasic"
            },
            "2": {
              "name": "meta.function-call.usr.ataribasic"
            },
            "3": {
              "name": "meta.function-call.abs.ataribasic"
            },
            "4": {
              "name": "meta.function-call.adr.ataribasic"
            },
            "5": {
              "name": "meta.function-call.asc.ataribasic"
            },
            "6": {
              "name": "meta.function-call.atn.ataribasic"
            },
            "7": {
              "name": "meta.function-call.clog.ataribasic"
            },
            "8": {
              "name": "meta.function-call.cos.ataribasic"
            },
            "9": {
              "name": "meta.function-call.exp.ataribasic"
            },
            "10": {
              "name": "meta.function-call.int.ataribasic"
            },
            "11": {
              "name": "meta.function-call.len.ataribasic"
            },
            "12": {
              "name": "meta.function-call.log.ataribasic"
            },
            "13": {
              "name": "meta.function-call.peek.ataribasic"
            },
            "14": {
              "name": "meta.function-call.rnd.ataribasic"
            },
            "15": {
              "name": "meta.function-call.sgn.ataribasic"
            },
            "16": {
              "name": "meta.function-call.sin.ataribasic"
            },
            "17": {
              "name": "meta.function-call.sqr.ataribasic"
            },
            "18": {
              "name": "meta.function-call.val.ataribasic"
            },
            "19": {
              "name": "meta.function-call.paddle.ataribasic"
            },
            "20": {
              "name": "meta.function-call.ptrig.ataribasic"
            },
            "21": {
              "name": "meta.function-call.stick.ataribasic"
            },
            "22": {
              "name": "meta.function-call.strig.ataribasic"
            }
          },
          "push": "required_args"
        },
        {
          "match": "[-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?)",
          "name": "constant.numeric.float.ataribasic"
        },
        {
          "include": "#mixin_variable_name"
        }
      ]
    },
    "required_args": {
      "patterns": [
        {
          "match": "\\(",
          "name": "support.paren.open.func.ataribasic",
          "set": "expr_paren_open"
        }
      ]
    },
    "mixin_operators": {
      "patterns": [
        {
          "match": "\\,",
          "name": "support.token.delimiter.list.ataribasic"
        },
        {
          "match": "([-+*/^])",
          "name": "keyword.operator.math.ataribasic"
        },
        {
          "match": "(<>|[<>]=?|=|AND|NOT|OR)",
          "name": "keyword.operator.logic.mixin.operators.ataribasic"
        }
      ]
    },
    "expr_device": {
      "patterns": [
        {
          "match": "([-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?))?",
          "name": "constant.numeric.device-id.ataribasic",
          "set": "expr_start"
        }
      ]
    },
    "mixin_top_expr": {
      "patterns": [
        {
          "include": "#mixin_string"
        },
        {
          "match": "\\(",
          "name": "support.paren.open.expr.ataribasic",
          "push": "expr_paren_open"
        },
        {
          "match": "\\)",
          "name": "invalid.illegal"
        },
        {
          "include": "#mixin_operators"
        },
        {
          "include": "#mixin_values"
        }
      ]
    },
    "expr_start": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_start.ataribasic"
        },
        {
          "include": "#mixin_statement_end"
        },
        {
          "include": "#mixin_top_expr"
        }
      ]
    },
    "expr_start_last": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_start_last.ataribasic"
        },
        {
          "include": "#mixin_top_expr"
        },
        {
          "match": ":",
          "name": "support.token.delimiter.statement.ataribasic",
          "set": "dead_code"
        }
      ]
    },
    "expr_paren_open": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_paren_open.ataribasic"
        },
        {
          "include": "#mixin_containers"
        },
        {
          "include": "#mixin_values"
        },
        {
          "include": "#mixin_operators"
        },
        {
          "match": "[^)]*(;:|$)",
          "name": "invalid.illegal"
        }
      ]
    },
    "cmd_print_dev": {
      "patterns": [
        {
          "match": "([-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?))?",
          "name": "constant.numeric.device-id.ataribasic",
          "set": "cmd_print"
        }
      ]
    },
    "mixin_string": {
      "patterns": [
        {
          "match": "\\\"",
          "name": "punctuation.definition.string.open.ataribasic",
          "push": "quoted_string"
        }
      ]
    },
    "cmd_print_old": {
      "patterns": [
        {
          "meta_content_scope": "ctx.cmd_print_old.ataribasic"
        },
        {
          "include": "#mixin_statement_end"
        },
        {
          "match": "\\(",
          "name": "support.paren.open.dim.ataribasic",
          "push": "expr_paren_open"
        },
        {
          "match": "\\)",
          "name": "invalid.illegal"
        },
        {
          "include": "#mixin_string"
        },
        {
          "match": ";",
          "name": "support.token.delimiter.concat.ataribasic"
        },
        {
          "include": "#mixin_operators"
        },
        {
          "include": "#mixin_values"
        }
      ]
    },
    "cmd_print": {
      "patterns": [
        {
          "meta_content_scope": "ctx.cmd_print.ataribasic"
        },
        {
          "include": "#mixin_statement_end"
        },
        {
          "match": ";",
          "name": "support.token.delimiter.concat.ataribasic"
        },
        {
          "match": "\\,",
          "name": "support.token.delimiter.tab.ataribasic"
        },
        {
          "include": "#real_expr"
        }
      ]
    },
    "quoted_string": {
      "patterns": [
        {
          "meta_scope": "string.quoted.ataribasic"
        },
        {
          "match": "[^\"]*$",
          "name": "invalid.illegal"
        },
        {
          "match": "\\\"",
          "name": "punctuation.definition.string.close.ataribasic"
        }
      ]
    },
    "syntax_error": {
      "patterns": [
        {
          "meta_scope": "invalid.error.syntax.ataribasic"
        },
        {
          "match": "$"
        }
      ]
    },
    "line_should_end": {
      "patterns": [
        {
          "match": "$"
        },
        {
          "match": "\\s*(:)\\s*(REM|(RE?)?\\.)",
          "captures": {
            "1": {
              "name": "support.token.delimiter.statement.ataribasic"
            },
            "2": {
              "name": "keyword.rem.shouldend.ataribasic"
            }
          },
          "set": "cmd_rem"
        },
        {
          "match": "\\S.*",
          "set": "dead_code"
        }
      ]
    },
    "statement_should_end": {
      "patterns": [
        {
          "match": ":"
        }
      ]
    },
    "line_and_statement_should_end": {
      "patterns": [
        {
          "match": ":",
          "name": "support.token.delimiter.statement.ataribasic",
          "set": "dead_code"
        }
      ]
    },
    "dead_code": {
      "patterns": [
        {
          "match": ":",
          "name": "support.token.delimiter.statement.ataribasic"
        },
        {
          "match": "REM|(RE?)?\\.",
          "name": "keyword.rem.ataribasic.deadcode marked.dead",
          "set": "cmd_rem"
        }
      ]
    },
    "marked_dead": {
      "patterns": [
        {
          "meta_scope": "invalid.warning.dead-code.ataribasic"
        },
        {
          "include": "#code_line"
        }
      ]
    },
    "real_expr": {
      "patterns": [
        {
          "include": "#mixin_statement_end"
        },
        {
          "match": "",
          "push": "expr_eat_modifier"
        }
      ]
    },
    "expr_eat_modifier": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_eat_modifier.ataribasic"
        },
        {
          "match": "[-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?)",
          "name": "constant.numeric.float.ataribasic",
          "set": "expr_wants_operator"
        },
        {
          "match": "(NOT)|(-)|(\\+)",
          "captures": {
            "1": {
              "name": "keyword.operator.logic.expr.modifiers.ataribasic"
            },
            "2": {
              "name": "keyword.operator.negative.ataribasic"
            },
            "3": {
              "name": "keyword.operator.positive.ataribasic"
            }
          },
          "set": "expr_2nd_modifier"
        }
      ]
    },
    "expr_2nd_modifier": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_2nd_modifier.ataribasic"
        },
        {
          "match": "[-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?)",
          "name": "constant.numeric.float.ataribasic",
          "set": "expr_wants_operator"
        },
        {
          "match": "NOT|[-+]",
          "name": "invalid.illegal"
        }
      ]
    },
    "expr_wants_value": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_wants_value.ataribasic"
        },
        {
          "match": "CHR\\$",
          "name": "meta.funct}ion-call.chrS.ataribasic",
          "set": [
            "expr_wants_operator",
            "required_args"
          ]
        },
        {
          "match": "STR\\$",
          "name": "meta.funct}ion-call.str.ataribasic",
          "set": [
            "expr_wants_operator",
            "required_args"
          ]
        },
        {
          "match": "(FRE)|(USR)|(ABS)|(ADR)|(ASC)|(ATN)|(CLOG)|(COS)|(EXP)|(INT)|(LEN)|(LOG)|(PEEK)|(RND)|(SGN)|(SIN)|(SQR)|(VAL)|(PADDLE)|(PTRIG)|(STICK)|(STRIG)",
          "captures": {
            "1": {
              "name": "meta.function-call.fre.ataribasic"
            },
            "2": {
              "name": "meta.function-call.usr.ataribasic"
            },
            "3": {
              "name": "meta.function-call.abs.ataribasic"
            },
            "4": {
              "name": "meta.function-call.adr.ataribasic"
            },
            "5": {
              "name": "meta.function-call.asc.ataribasic"
            },
            "6": {
              "name": "meta.function-call.atn.ataribasic"
            },
            "7": {
              "name": "meta.function-call.clog.ataribasic"
            },
            "8": {
              "name": "meta.function-call.cos.ataribasic"
            },
            "9": {
              "name": "meta.function-call.exp.ataribasic"
            },
            "10": {
              "name": "meta.function-call.int.ataribasic"
            },
            "11": {
              "name": "meta.function-call.len.ataribasic"
            },
            "12": {
              "name": "meta.function-call.log.ataribasic"
            },
            "13": {
              "name": "meta.function-call.peek.ataribasic"
            },
            "14": {
              "name": "meta.function-call.rnd.ataribasic"
            },
            "15": {
              "name": "meta.function-call.sgn.ataribasic"
            },
            "16": {
              "name": "meta.function-call.sin.ataribasic"
            },
            "17": {
              "name": "meta.function-call.sqr.ataribasic"
            },
            "18": {
              "name": "meta.function-call.val.ataribasic"
            },
            "19": {
              "name": "meta.function-call.paddle.ataribasic"
            },
            "20": {
              "name": "meta.function-call.ptrig.ataribasic"
            },
            "21": {
              "name": "meta.function-call.stick.ataribasic"
            },
            "22": {
              "name": "meta.function-call.strig.ataribasic"
            }
          },
          "set": [
            "expr_wants_operator",
            "required_args"
          ]
        },
        {
          "match": "\\(",
          "name": "support.paren.open.ataribasic",
          "set": "expr_till_close"
        },
        {
          "match": "\\\"",
          "name": "punctuation.definition.string.open.ataribasic",
          "set": "expr_eat_string"
        },
        {
          "match": "[-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?)",
          "name": "variable.float.exprwantsvalue.ataribasic",
          "set": "expr_wants_operator"
        },
        {
          "match": "THEN|GOTO|GOSUB",
          "name": "invalid.illegal"
        },
        {
          "match": "[A-Z][A-Z0-9]*\\$",
          "name": "variable.string.expr_wants.ataribasic",
          "set": "expr_eat_subscript"
        },
        {
          "match": "[A-Z][A-Z0-9]*",
          "name": "variable.float.exprwantsvalue2.ataribasic",
          "set": "expr_eat_subscript"
        }
      ]
    },
    "expr_wants_operator": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_wants_operator.ataribasic"
        },
        {
          "match": "((<>|[<>]=|[-+*/^<=>]|AND|OR)\\s*(:|$))",
          "name": "invalid.illegal"
        },
        {
          "match": "[-+*/^]",
          "name": "keyword.operator.math.ataribasic",
          "set": "expr_eat_modifier"
        },
        {
          "match": "<>|[<>]=?|=|AND|OR",
          "name": "keyword.operator.logic.expr.wants.operator.ataribasic",
          "set": "expr_eat_modifier"
        },
        {
          "match": "(THEN)\\s*([-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?))",
          "captures": {
            "1": {
              "name": "keyword.then.ataribasic"
            },
            "2": {
              "name": "constant.numeric.line-number.ataribasic"
            }
          },
          "set": "line_and_statement_should_end"
        },
        {
          "match": "THEN",
          "name": "keyword.then.ataribasic",
          "set": "code_line"
        },
        {
          "match": "(GOTO)|(GOSUB)",
          "captures": {
            "1": {
              "name": "keyword.goto.ataribasic"
            },
            "2": {
              "name": "keyword.gosub.ataribasic"
            }
          }
        },
        {
          "match": "([A-Z][A-Z0-9]*)|([-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?))|\\(",
          "name": "invalid.illegal"
        },
        {
          "match": ""
        }
      ]
    },
    "expr_wants_comparison": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_wants_comparison.ataribasic"
        },
        {
          "match": "(<>|[<>]=?|=)\\s*(:|$)",
          "name": "invalid.illegal"
        },
        {
          "match": "<>|[<>]=?|=",
          "name": "keyword.operator.logic.ataribasic",
          "set": "expr_eat_modifier"
        },
        {
          "match": "(THEN)\\s*([-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?))",
          "captures": {
            "1": {
              "name": "keyword.then.ataribasic"
            },
            "2": {
              "name": "constant.numeric.line-number.ataribasic"
            }
          },
          "set": "line_and_statement_should_end"
        },
        {
          "match": "THEN",
          "name": "keyword.then.ataribasic",
          "set": "code_line"
        },
        {
          "match": "(GOTO)|(GOSUB)",
          "captures": {
            "1": {
              "name": "keyword.goto.ataribasic"
            },
            "2": {
              "name": "keyword.gosub.ataribasic"
            }
          }
        },
        {
          "match": "([A-Z][A-Z0-9]*)|([-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?))|\\(",
          "name": "invalid.illegal"
        },
        {
          "match": ""
        }
      ]
    },
    "expr_eat_subscript": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_eat_subscript.ataribasic"
        },
        {
          "match": "\\s*(\\()",
          "captures": {
            "1": {
              "name": "support.paren.open.subscript.ataribasic"
            }
          },
          "set": "expr_till_close"
        }
      ]
    },
    "expr_eat_string": {
      "patterns": [
        {
          "meta_scope": "string.quoted.ataribasic"
        },
        {
          "match": "$"
        },
        {
          "match": "[^\"]*(\")",
          "captures": {
            "1": {
              "name": "punctuation.definition.string.close.ataribasic"
            }
          },
          "set": "expr_wants_operator"
        }
      ]
    },
    "expr_till_close": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_till_close.ataribasic"
        },
        {
          "match": "[^)]*(;:|$)",
          "name": "invalid.illegal"
        },
        {
          "include": "#mixin_statement_end"
        },
        {
          "match": "\\)",
          "name": "support.paren.close.subscript.ataribasic",
          "set": "expr_wants_operator"
        },
        {
          "match": "\\,",
          "name": "support.token.delimiter.subscripts.ataribasic"
        },
        {
          "match": "",
          "push": "expr_eat_modifier"
        }
      ]
    },
    "expr_wants_float": {
      "patterns": [
        {
          "meta_content_scope": "ctx.expr_wants_float.ataribasic"
        },
        {
          "match": "[A-Z][A-Z0-9]*\\$",
          "name": "invalid.illegal"
        },
        {
          "match": "[A-Z][A-Z0-9]*",
          "name": "variable.float.exprwantsfloat.ataribasic",
          "set": "expr_eat_subscript"
        },
        {
          "match": "[-+]?(\\d+\\.\\d*(E\\d+)?|\\.?\\d+(E\\d+)?)",
          "name": "constant.numeric.float.ataribasic",
          "set": "expr_wants_operator"
        }
      ]
    },
    "expr_wants_string": {
      "patterns": [
        {
          "match": "[A-Z][A-Z0-9]*\\$",
          "name": "variable.string.expr_wants_string.ataribasic",
          "set": "expr_wants_operator"
        },
        {
          "include": "#mixin_string"
        }
      ]
    },
    "mixin_containers": {
      "patterns": [
        {
          "include": "#mixin_string"
        },
        {
          "match": "\\(",
          "name": "support.paren.open.expr.ataribasic",
          "push": "expr_paren_open"
        },
        {
          "match": "\\)",
          "name": "support.paren.close.ataribasic"
        }
      ]
    },
    "mixin_some_exprs": {
      "patterns": [
        {
          "include": "#mixin_statement_end"
        },
        {
          "include": "#mixin_string"
        },
        {
          "match": "(<>|[<>]=?|=|AND|NOT|OR)",
          "name": "keyword.operator.logic.mixin.some.ataribasic"
        },
        {
          "include": "#mixin_values"
        },
        {
          "match": "\\(",
          "name": "support.paren.open.expr.ataribasic",
          "push": "expr_paren_open"
        },
        {
          "match": "\\)",
          "name": "invalid.illegal"
        },
        {
          "match": "[:$]",
          "name": "invalid.illegal"
        },
        {
          "match": "([-+*/^])",
          "name": "keyword.operator.math.ataribasic"
        }
      ]
    },
    "one_expr": {
      "patterns": [
        {
          "match": "\\s*([,;:]|$)",
          "name": "invalid.illegal"
        }
      ]
    },
    "two_exprs": {
      "patterns": [
        {
          "meta_content_scope": "ctx.two_exprs.ataribasic"
        },
        {
          "match": "\\s*:|$",
          "name": "invalid.illegal"
        },
        {
          "match": "\\s*(,)",
          "captures": {
            "1": {
              "name": "support.token.delimiter.list.1.ataribasic"
            }
          },
          "set": "one_expr"
        },
        {
          "include": "#real_expr"
        }
      ]
    },
    "three_exprs": {
      "patterns": [
        {
          "meta_content_scope": "ctx.three_exprs.ataribasic"
        },
        {
          "match": "\\s*:|$",
          "name": "invalid.illegal"
        },
        {
          "match": "\\s*(,)",
          "captures": {
            "1": {
              "name": "support.token.delimiter.list.2.ataribasic"
            }
          },
          "set": "two_exprs"
        },
        {
          "include": "#real_expr"
        }
      ]
    },
    "four_exprs": {
      "patterns": [
        {
          "meta_content_scope": "ctx.four_exprs.ataribasic"
        },
        {
          "match": "\\s*:|$",
          "name": "invalid.illegal"
        },
        {
          "match": "\\s*(,)",
          "captures": {
            "1": {
              "name": "support.token.delimiter.list.3.ataribasic"
            }
          },
          "set": "three_exprs"
        },
        {
          "include": "#real_expr"
        }
      ]
    },
    "mixin_statement_end": {
      "patterns": [
        {
          "match": ":\\s*$",
          "name": "invalid.illegal"
        },
        {
          "match": ":|$",
          "name": "support.token.delimiter.statement.ataribasic"
        }
      ]
    }
  }
}